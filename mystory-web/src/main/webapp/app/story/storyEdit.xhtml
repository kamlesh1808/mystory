<ui:composition template="/WEB-INF/templates/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:storyComps="http://xmlns.jcp.org/jsf/composite/comps/story">

	<ui:define name="title">
		<h:outputText value="#{i18nApp.story_editTitle}" />
	</ui:define>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{storiesMBean.doStoryEdit()}"
				onPostback="false" />
		</f:metadata>
	</ui:define>

	<ui:define name="javaScriptInsert">
		<h:outputScript>
			$(document).ready(function() {
    			$(":input:visible:enabled:first").focus();
			});
		</h:outputScript>
	</ui:define>

	<!-- override messages in layout.xhtml with blank  -->
	<ui:define name="messages" />

	<ui:define name="content">
		<div class="row">
			<div class="col-sm-12 col-md-12">
				<c:choose>
					<c:when test="#{signInMBean.isUserSignedIn()}">
						<storyComps:storyComp headerLabel="#{i18nApp.story_editHeader}"
							edit="true"
							storyDetailsSectionHeader="#{i18nApp.story_storyDetailsSectionHeader}"
							storyNameLabel="#{i18nApp.story_storyName}"
							storyNameValue="#{storiesMBean.story.storyName}"
							storyTypeLabel="#{i18nApp.story_storyType}"
							storyTypeValue="#{storiesMBean.story.storyType}"
							accessTypeLabel="#{i18nApp.story_storyAccessType}"
							accessTypeValue="#{storiesMBean.story.accessType}"
							storyTitleLabel="#{i18nApp.story_storyTitle}"
							storyTitleValue="#{storiesMBean.story.title}"
							storyStatusLabel="#{i18nApp.story_storyStatus}"
							storyStatusValue="#{storiesMBean.story.status}"
							storyTextLabel="#{i18nApp.story_storyText}"
							storyTextValue="#{storiesMBean.story.storyText}"
							storyTextUpdatedLabel="#{i18nApp.story_storyTextUpdated}"
							storyTextUpdatedValue="#{storiesMBean.story.storyTextUpdatedTimestampFormatted}"
							storyTagsLabel="#{i18nApp.story_storyTags}"
							storyTagsValue="#{storiesMBean.story.tags}"
							storyCreatedUpdatedRendered="true"
							storyCreated="#{storiesMBean.story.createdTimestampFormatted}"
							storyUpdated="#{storiesMBean.story.updatedTimestampFormatted}"
							submitButtonText="#{i18nApp.story_storyUpdate}"
							submitButtonAction="#{storiesMBean.doStoryUpdate()}"
							cancelButtonText="#{i18nApp.commonform_cancelButton}">
						</storyComps:storyComp>
					</c:when>
				</c:choose>
			</div>
		</div>
	</ui:define>

</ui:composition>